<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pydidas general command line tutorial &mdash; pydidas</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/_css/pydidas-custom.css?v=9d9b2af9" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=41fa6165"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The DiffractionExperimentContext class" href="cmd_diffraction_exp_context.html" />
    <link rel="prev" title="Command line manuals" href="../commandline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4444AA" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pydidas
              <img src="../../_static/pydidas_snakes_circ_bg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                23.12.08
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../manuals.html">Manuals</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../commandline.html">Command line manuals</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">pydidas general command line tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accessing-parameters">Accessing Parameters</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#useful-methods-of-parametercollection">Useful methods of ParameterCollection</a></li>
<li class="toctree-l5"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#global-pydidas-objects">Global pydidas objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#global-objects-for-processing">Global objects for processing</a></li>
<li class="toctree-l5"><a class="reference internal" href="#plugincollection">PluginCollection</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#pydidas-qsettings">pydidas QSettings</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#description-of-pydidas-s-qsettings">Description of pydidas’s Qsettings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cmd_diffraction_exp_context.html">The DiffractionExperimentContext class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_scan_context.html">The ScanContext class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_workflow_tree.html">The WorkflowTree class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_workflow_results.html">The WorkflowResults class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_running_workflows.html">Running pydidas workflows from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cmdline_apps/cmd_apps.html">Command line applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gui/graphical_user_interface.html">Graphical user interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../code/code_documentation.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide.html">Developer guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #4444AA" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pydidas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../manuals.html">Manuals</a></li>
          <li class="breadcrumb-item"><a href="../commandline.html">Command line manuals</a></li>
      <li class="breadcrumb-item active">pydidas general command line tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manuals/cmdline_global/cmd_global.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pydidas-general-command-line-tutorial">
<h1>pydidas general command line tutorial<a class="headerlink" href="#pydidas-general-command-line-tutorial" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#accessing-parameters" id="id3">Accessing Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#useful-methods-of-parametercollection" id="id4">Useful methods of ParameterCollection</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#global-pydidas-objects" id="id6">Global pydidas objects</a></p>
<ul>
<li><p><a class="reference internal" href="#global-objects-for-processing" id="id7">Global objects for processing</a></p></li>
<li><p><a class="reference internal" href="#plugincollection" id="id8">PluginCollection</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pydidas-qsettings" id="id9">pydidas QSettings</a></p>
<ul>
<li><p><a class="reference internal" href="#description-of-pydidas-s-qsettings" id="id10">Description of pydidas’s Qsettings</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="accessing-parameters">
<span id="id1"></span><h2>Accessing Parameters<a class="headerlink" href="#accessing-parameters" title="Link to this heading"></a></h2>
<p>All pydidas objects handle user variables in the form of
<a class="reference internal" href="../../code/api/core/parameter.html#pydidas.core.Parameter" title="pydidas.core.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> which enforces type checks where
required. These objects are organized in
<a class="reference internal" href="../../code/api/core/parameter_collection.html#pydidas.core.ParameterCollection" title="pydidas.core.ParameterCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterCollections</span></code></a> which allow
direct access to the Parameter values. Usually, users do not need to create or
manage Parameters but only modify their values.</p>
<section id="useful-methods-of-parametercollection">
<h3>Useful methods of ParameterCollection<a class="headerlink" href="#useful-methods-of-parametercollection" title="Link to this heading"></a></h3>
<p>For the full <a class="reference internal" href="../../code/api/core/parameter_collection.html#pydidas.core.ParameterCollection" title="pydidas.core.ParameterCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterCollections</span></code></a>
method documentation, please refer to the class documentation. However, users
will probably manage with a handful of methods:</p>
<blockquote>
<div><dl class="simple">
<dt><strong>get_param_keys</strong>()</dt><dd><p>Get all the reference keys to access the respective parameters.</p>
</dd>
<dt><strong>get_param_value</strong>(<em>key</em>)</dt><dd><p>Get the value of the Parameter referenced by <em>key</em>.</p>
</dd>
<dt><strong>get_param_values_as_dict</strong>()</dt><dd><p>Get the value of all stored Parameters in form of a dictionary with the
Parameter reference keys as dict keys and the Parameter values as dict
values.</p>
</dd>
<dt><strong>set_param_value</strong>(<em>key</em>, <em>value</em>)</dt><dd><p>Set the value of the Parameter referenced by <em>key</em> to the given <em>value</em>.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The described methods are universal and apply to all pydidas objects with
Parameters.</p>
</div>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h3>
<p>All examples will use the DiffractionExperimentContext object (please see below for a
description of the object) and the examples will only cover the code bases, not
the use case.</p>
<p>First, let us create the object called <code class="xref py py-data docutils literal notranslate"><span class="pre">exp</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
</pre></div>
</div>
<p>The object <code class="xref py py-data docutils literal notranslate"><span class="pre">exp</span></code> will be used in all examples below.</p>
<blockquote>
<div><ol class="arabic">
<li><p>Get all Parameter keys contained in <code class="xref py py-data docutils literal notranslate"><span class="pre">exp</span></code>:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">get_param_keys</span><span class="p">()</span>
<span class="go">[&#39;xray_wavelength&#39;,</span>
<span class="go"> &#39;xray_energy&#39;,</span>
<span class="go"> &#39;detector_name&#39;,</span>
<span class="go"> &#39;detector_npixx&#39;,</span>
<span class="go"> &#39;detector_npixy&#39;,</span>
<span class="go"> &#39;detector_pxsizex&#39;,</span>
<span class="go"> &#39;detector_pxsizey&#39;,</span>
<span class="go"> &#39;detector_mask_file&#39;,</span>
<span class="go"> &#39;detector_dist&#39;,</span>
<span class="go"> &#39;detector_poni1&#39;,</span>
<span class="go"> &#39;detector_poni2&#39;,</span>
<span class="go"> &#39;detector_rot1&#39;,</span>
<span class="go"> &#39;detector_rot2&#39;,</span>
<span class="go"> &#39;detector_rot3&#39;]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>2. Get the value of the <a class="reference internal" href="../../code/api/core/parameter.html#pydidas.core.Parameter" title="pydidas.core.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>
<em>xray_energy</em></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">15.0</span>
</pre></div>
</div>
</div></blockquote>
<p>3. Get the values of all <a class="reference internal" href="../../code/api/core/parameter.html#pydidas.core.Parameter" title="pydidas.core.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> as
a dictionary to process further:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">get_param_values_as_dict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span>
<span class="go">{&#39;xray_wavelength&#39;: 0.8265613228880018,</span>
<span class="go"> &#39;xray_energy&#39;: 15.0,</span>
<span class="go"> &#39;detector_name&#39;: &#39;Eiger 9M&#39;,</span>
<span class="go"> &#39;detector_npixx&#39;: 3110,</span>
<span class="go"> &#39;detector_npixy&#39;: 3269,</span>
<span class="go"> &#39;detector_sizex&#39;: 7.5e-05,</span>
<span class="go"> &#39;detector_sizey&#39;: 7.5e-05,</span>
<span class="go"> &#39;detector_mask_file&#39;: Path(&#39;.&#39;),</span>
<span class="go"> &#39;detector_dist&#39;: 0.23561364873702045,</span>
<span class="go"> &#39;detector_poni1&#39;: 0.11575233539615679,</span>
<span class="go"> &#39;detector_poni2&#39;: 0.12393982882406686,</span>
<span class="go"> &#39;detector_rot1&#39;: -0.007522050071166131,</span>
<span class="go"> &#39;detector_rot2&#39;: -0.004845626736941386,</span>
<span class="go"> &#39;detector_rot3&#39;: 5.799041608456517e-08}</span>
</pre></div>
</div>
</div></blockquote>
<p>4. Set the value of the <em>xray_energy</em>
<a class="reference internal" href="../../code/api/core/parameter.html#pydidas.core.Parameter" title="pydidas.core.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a>. This is a float value,
for demonstration purposes, let us set it with a string first. This will
raise a :py:data:ValueError` and the Parameter will not be updated.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">,</span> <span class="s1">&#39;12.0&#39;</span><span class="p">)</span>
<span class="go">ValueError: Cannot set Parameter (object ID:2506714567632,</span>
<span class="go">refkey: &quot;xray_energy&quot;, name: &quot;X-ray energy&quot;) because it is of the</span>
<span class="go">wrong data type.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">12.0</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</section>
</section>
<section id="global-pydidas-objects">
<h2>Global pydidas objects<a class="headerlink" href="#global-pydidas-objects" title="Link to this heading"></a></h2>
<section id="global-objects-for-processing">
<h3>Global objects for processing<a class="headerlink" href="#global-objects-for-processing" title="Link to this heading"></a></h3>
<p>All apps use the same global persistent objects (implemented as singletons), if
required. Information is separated according to the reasons to change. The three
main objects are:</p>
<blockquote>
<div><dl class="simple">
<dt><a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.scan_context.Scan" title="pydidas.contexts.scan_context.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanContext</span></code></a></dt><dd><p>The details about the scan. This includes generic information like scan
title, data directory and scan names and specific information like the
number of scan dimensions and the number of points in each dimension
(but also metadata like dimension names, units, offsets and step width).
The latter information can be used to create the correct axis labels in
plots. For the full documentation please visit the
<a class="reference internal" href="cmd_scan_context.html#scan-context"><span class="std std-ref">ScanSetup manual</span></a>.</p>
</dd>
<dt><a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code></a></dt><dd><p>This object includes information about the global experimental setup
like X-ray energy, detector type, position and geometry. For the full
documentation please visit the
<a class="reference internal" href="cmd_diffraction_exp_context.html#diffraction-exp-context"><span class="std std-ref">DiffractionExperimentContext manual</span></a>.</p>
</dd>
<dt><a class="reference internal" href="../../code/api/workflow/workflow.html#pydidas.workflow.ProcessingTree" title="pydidas.workflow.ProcessingTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowTree</span></code></a></dt><dd><p>The WorkflowTree holds information about which plugins are used and
about the order of plugins to be processed. For the full documentation
please visit the <a class="reference internal" href="cmd_workflow_tree.html#workflow-tree"><span class="std std-ref">WorkflowTree manual</span></a>.</p>
</dd>
</dl>
</div></blockquote>
<p>These objects can be accesses by calling their respective factories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">ScanContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXPERIMENT</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TREE</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">WorkflowTree</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that the factories return a link to the unique instance and multiple calls
yield the same object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">ScanContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN</span>
<span class="go">&lt;pydidas.contexts.scan_context.Scan at 0x1d4a257b820&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN2</span>  <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">ScanContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN2</span>
<span class="go">&lt;pydidas.contexts.scan_context.Scan at 0x1d4a257b820&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SCAN</span> <span class="o">==</span> <span class="n">SCAN2</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="plugincollection">
<span id="global-plugincollection"></span><h3>PluginCollection<a class="headerlink" href="#plugincollection" title="Link to this heading"></a></h3>
<p>pydidas uses a global
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry" title="pydidas.plugins.plugin_collection.PluginRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">PluginCollection</span></code></a>
to manage all known plugins. Plugins will be discovered based on known plugin
paths which are managed persistently in the PluginCollection using Qt’s
QSettings which use the systems registry and are platform-independent. A
reference to the persistent <a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry" title="pydidas.plugins.plugin_collection.PluginRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">PluginCollection</span></code></a> object can be obtained
using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">PluginCollection</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the full documentation of all available methods, please refer to the
class documentation:
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry" title="pydidas.plugins.plugin_collection.PluginRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">PluginCollection</span></code></a>
This section handles only the most common use cases.</p>
</div>
<section id="management-of-stored-paths">
<h4>Management of stored paths<a class="headerlink" href="#management-of-stored-paths" title="Link to this heading"></a></h4>
<p>Paths can be managed by three methods. New paths can be added using the
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.find_and_register_plugins" title="pydidas.plugins.plugin_collection.PluginRegistry.find_and_register_plugins"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_and_register_plugins</span></code></a>
method and a list of all currently registered paths can be obtained by the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_registered_paths</span></code>
method. To permanently remove a stored paths, a user can use the
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.unregister_plugin_path" title="pydidas.plugins.plugin_collection.PluginRegistry.unregister_plugin_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unregister_plugin_path</span></code></a>
method. To remove all stored paths and plugins from the current instance, use
the <a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.clear_collection" title="pydidas.plugins.plugin_collection.PluginRegistry.clear_collection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_collection</span></code></a> method.
This method must be called with a <code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code> flag to take effect and is
ignored otherwise.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using the <a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.clear_collection" title="pydidas.plugins.plugin_collection.PluginRegistry.clear_collection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_collection</span></code></a>
method will remove all paths which have ever been registered and the user is
responsible to add all new paths again.</p>
<p>Also, if a user tries to access the  empty PluginCollection, the default
plugin path will be added automatically.</p>
</div>
<p>An example of the use of stored paths is given below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">PluginCollection</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">registered_paths</span>
<span class="go">[Path(&#39;&#39;/home/someuser/path/to/plugins&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">find_and_register_plugins</span><span class="p">(</span>
<span class="go">    &#39;/home/someuser/another/path&#39;,</span>
<span class="go">    &#39;home/someuser/yet/another/path&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">registered_paths</span>
<span class="go">[Path(&#39;/home/someuser/path/to/plugins&#39;),</span>
<span class="go"> Path(&#39;/home/someuser/another/path&#39;),</span>
<span class="go"> Path(&#39;/home/someuser/yet/another/path&#39;)]</span>

<span class="go"># Now, if we exit and restart python, all paths will be included in the</span>
<span class="go"># new instance:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exit</span><span class="p">()</span>
<span class="go">$ python</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">PluginCollection</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">registered_paths</span>
<span class="go">[Path(&#39;/home/someuser/path/to/plugins&#39;),</span>
<span class="go"> Path(&#39;/home/someuser/another/path&#39;),</span>
<span class="go"> Path(&#39;&#39;/home/someuser/yet/another/path&#39;)]</span>

<span class="go"># Using the ``clear_collection`` method without the confirmation flag</span>
<span class="go"># will be ignored:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">clear_collection</span><span class="p">()</span>
<span class="go">&#39;The confirmation flag was not given. The PluginCollection has not been reset.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">registered_paths</span>
<span class="go">[Path(&#39;/home/someuser/path/to/plugins&#39;),</span>
<span class="go"> Path(&#39;/home/someuser/another/path&#39;),</span>
<span class="go"> Path(&#39;/home/someuser/yet/another/path&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">clear_collection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go"># When accessing the COLLECTION with no paths registered, the default</span>
<span class="go"># Path will be added:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">registered_paths</span>
<span class="go">[Path(&#39;/generic/plugin/path&#39;)]</span>
</pre></div>
</div>
</section>
<section id="plugin-references">
<h4>Plugin references<a class="headerlink" href="#plugin-references" title="Link to this heading"></a></h4>
<p>Internally, plugins are referenced by their class name and there can only be one
plugin registered with the same class name. This behaviour is deliberate to
allow overwriting generic plugins with modified private versions. By default,
plugin references are overridden with a new class if such a class is
encountered. In addition to the class name, each plugin has a
<code class="xref py py-data docutils literal notranslate"><span class="pre">plugin_name</span></code> attribute which allows to set a more readable reference
name for the Plugin.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The loading of Plugins occurs in the order of the stored paths. Therefore,
a path further down in the list will take precedence over an earlier path.
The loading of Plugins can be controlled by organizing the sequence
of paths.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Trying to register a second class with a different class name but the same
plugin name will fail and raise an exception. Both the class name and the
plugin name must be unique and a plugin can only replace a plugin with both
matching class and plugin names or with a similar class name and a different
plugin name.</p>
</div>
</section>
<section id="finding-and-getting-a-plugin">
<h4>Finding and getting a plugin<a class="headerlink" href="#finding-and-getting-a-plugin" title="Link to this heading"></a></h4>
<p>Plugins can either be found by their class name using the
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.get_plugin_by_name" title="pydidas.plugins.plugin_collection.PluginRegistry.get_plugin_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_plugin_by_name</span></code></a>
method or by their plugin name using the
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.get_plugin_by_plugin_name" title="pydidas.plugins.plugin_collection.PluginRegistry.get_plugin_by_plugin_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_plugin_by_plugin_name</span></code></a>
method. A list of all available plugin class names can be obtained with the
<a class="reference internal" href="../../code/api/plugins.html#pydidas.plugins.plugin_collection.PluginRegistry.get_all_plugin_names" title="pydidas.plugins.plugin_collection.PluginRegistry.get_all_plugin_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_plugin_names</span></code></a>
method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">PluginCollection</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">COLLECTION</span><span class="o">.</span><span class="n">get_all_plugin_names</span><span class="p">()</span>
<span class="go">[&#39;Hdf5fileSeriesLoader&#39;,</span>
<span class="go"> &#39;FrameLoader&#39;,</span>
<span class="go"> &#39;MaskImage&#39;,</span>
<span class="go"> &#39;PyFAI2dIntegration&#39;,</span>
<span class="go"> &#39;PyFAIazimuthalIntegration&#39;,</span>
<span class="go"> &#39;PyFAIradialIntegration&#39;,</span>
<span class="go"> &#39;pyFAIintegrationBase&#39;,</span>
<span class="go"> &#39;BasePlugin&#39;,</span>
<span class="go"> &#39;InputPlugin&#39;,</span>
<span class="go"> &#39;OutputPlugin&#39;,</span>
<span class="go"> &#39;ProcPlugin&#39;]</span>

<span class="go"># Get the plugin class from the collection:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_plugin</span> <span class="o">=</span> <span class="n">COLLECTION</span><span class="o">.</span><span class="n">get_plugin_by_name</span><span class="p">(</span><span class="s1">&#39;PyFAI2dIntegration&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_plugin</span>
<span class="go">proc_plugins.pyfai_2d_integration.PyFAI2dIntegration</span>

<span class="go"># Create a new instance:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_integrate2d</span> <span class="o">=</span> <span class="n">_plugin</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_integrate2d</span>
<span class="go">&lt;proc_plugins.pyfai_2d_integration.PyFAI2dIntegration at 0x2132e91a670&gt;</span>

<span class="go"># Get an azimuthal integration plugin by its plugin name and create a</span>
<span class="go"># new instance directly (note the additional &quot;()&quot; at the end)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_azi_int</span> <span class="o">=</span> <span class="n">COLLECTION</span><span class="o">.</span><span class="n">get_plugin_by_plugin_name</span><span class="p">(</span><span class="s1">&#39;pyFAI azimuthal Integration&#39;</span><span class="p">)()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_azi_int</span>
<span class="go">&lt;proc_plugins.pyfai_azimuthal_integration.PyFAIazimuthalIntegration at 0x2132e9b6ee0&gt;</span>
</pre></div>
</div>
<p>Once the plugins have been created, their Parameters can be modified as
described in the <a class="reference internal" href="#id1">Accessing Parameters</a> section. The organization of plugins
into a WorkflowTree are covered in the section <a class="reference internal" href="cmd_workflow_tree.html#workflow-tree"><span class="std std-ref">WorkflowTree manual</span></a>.</p>
</section>
</section>
</section>
<section id="pydidas-qsettings">
<span id="id2"></span><h2>pydidas QSettings<a class="headerlink" href="#pydidas-qsettings" title="Link to this heading"></a></h2>
<p>pydidas uses Qt’s QSettings to store persistent information in the system’s
registry. The <a class="reference internal" href="../../code/api/core/others.html#pydidas.core.PydidasQsettings" title="pydidas.core.PydidasQsettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">pydidas.core.PydidasQsettings</span></code></a> class can be used to
display and modify global parameters.
The most useful methods for general users are
<a class="reference internal" href="../../code/api/core/others.html#pydidas.core.PydidasQsettings.show_all_stored_q_settings" title="pydidas.core.PydidasQsettings.show_all_stored_q_settings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">show_all_stored_q_settings</span></code></a>
to print the names and values of all stored settings and
<a class="reference internal" href="../../code/api/core/others.html#pydidas.core.PydidasQsettings.set_value" title="pydidas.core.PydidasQsettings.set_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_value</span></code></a> to modify a key.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">PydidasQsettings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">show_all_stored_q_settings</span><span class="p">()</span>
<span class="go">global/mp_n_workers: 4</span>
<span class="go">global/plot_update_time: 1</span>
<span class="go">global/shared_buffer_max_n: 20</span>
<span class="go">global/shared_buffer_size: 100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s1">&#39;global/shared_buffer_size&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">show_all_stored_q_settings</span><span class="p">()</span>
<span class="go">global/mp_n_workers: 4</span>
<span class="go">global/plot_update_time: 1</span>
<span class="go">global/shared_buffer_max_n: 20</span>
<span class="go">global/shared_buffer_size: 50</span>
</pre></div>
</div>
<p>Note that the full list of global keys is longer and only a subset is presented
here for demonstration purposes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Qsettings are persistent (for a specific pydidas version) on the system
for every individual user account, i.e. any changes you make will persist
if you start a new pydidas instance or process. Likewise, any changes made
as a different user will not be applied to your settings.</p>
</div>
<section id="description-of-pydidas-s-qsettings">
<h3>Description of pydidas’s Qsettings<a class="headerlink" href="#description-of-pydidas-s-qsettings" title="Link to this heading"></a></h3>
<p>Pydidas QSettings are grouped into two main categories: ‘global’ settings and
‘user’ settings. Global settings define the system behaviour and performance
whereas the user settings handle convenience user configurations.</p>
<section id="global-settings">
<h4><strong>Global</strong> settings<a class="headerlink" href="#global-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>Multiprocessing settings</dt><dd><ul>
<li><dl class="simple">
<dt>Number of MP workers (key: global/mp_n_workers, type: int, default: 4)</dt><dd><p>The number of multiprocessing workers. Note that this number should not
be set too high for two reasons:
1. File reading processes interfere with each other if too many are
active at once.
2. pyFAI already inherently uses parallelization and you can only gain
limited performance increases for multiple parallel processes.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Shared buffer size limit (key: global/shared_buffer_size, type: float, default: 100, unit: MB)</dt><dd><p>A shared buffer is used to efficiently transport data between the main
App and multiprocessing Processes. This buffer must be large enough to
store at least one instance of all result data.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Memory settings</dt><dd><ul>
<li><dl class="simple">
<dt>Buffer dataframe limit (key: global/shared_buffer_max_n, type: int, default: 20)</dt><dd><p>The maximum number of datasets in the buffer. A dataset consists of all
results for one frame. For performance reasons, the buffer should not
be too large as this is only a temporary buffer.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Maximum image size (key: global/max_image_size, type: float, default: 100, unit: MPixel)</dt><dd><p>The maximum image size determines the maximum size of images pydidas
will handle. The default is 100 Megapixels.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>GUI plot update settings</dt><dd><ul>
<li><dl class="simple">
<dt>Plot update time (key: global/plot_update_time, type: float, default: 1.0)</dt><dd><p>The delay before any plot updates will be processed. This will prevent
multiple frequent update of plots.)- Composite creation settings</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="user-settings">
<h4><strong>User</strong> settings<a class="headerlink" href="#user-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>Update settings</dt><dd><ul>
<li><dl class="simple">
<dt>Plot update time (key: user/auto_check_for_updates, type: bool, default: True)</dt><dd><p>Flag to set the update check behaviour. By default, the GUI will check
for a new version after starting up, if an active internet connection
exists. This behaviour can be disabled by setting this flag to False.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Composite creator settings</dt><dd><ul>
<li><dl class="simple">
<dt>Mosaic tiling border width (key: user/mosaic_border_width, type: int, default: 0, unit: px)</dt><dd><p>The width of the border inserted between adjacent frames in the
composite creation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Mosaic border value (key: user/mosaic_border_value, type: float, default: 0)</dt><dd><p>The value to be put in the border pixels in mosaics.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Plot settings</dt><dd><ul>
<li><dl class="simple">
<dt>Histogram lower outlier fraction (key: user/histogram_outlier_fraction_low, type: float, default: 0.02)</dt><dd><p>The lower fraction of the histogram to be cropped when using the
“Crop histogram outliers” button in plots in the GUI. The value is
the absolute fraction, i.e. the default of 0.02 will ignore the lowest
2% of pixels when setting the colormap from the histogram.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Histogram high outlier fraction (key: user/histogram_outlier_fraction_high, type: float, default: 0.07)</dt><dd><p>The high fraction of the histogram to be cropped when using the
“Crop histogram outliers” button in plots in the GUI. The value is
the absolute fraction, i.e. the default of 0.07 will ignore the brightest
7% of pixels when setting the colormap from the histogram. The default of
0.07 is set to allow masking all the gaps in Eiger detectors by default.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Default colormap (key: user/cmap_name, type: str, default: Gray)</dt><dd><p>The name of the default colormap to use. The name must be a valid
matplotlib colormap name.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Plugins</dt><dd><ul>
<li><dl class="simple">
<dt>Plugin paths (key: user/plugin_path, type: str, default: n/a)</dt><dd><p>The names of the paths where pydidas will look for plugins.
The default is normally per-determined by pydidas and should not be
changed except for expert users. Additional paths can be added by
appending them with a double semicolon “;;” as separator.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../commandline.html" class="btn btn-neutral float-left" title="Command line manuals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmd_diffraction_exp_context.html" class="btn btn-neutral float-right" title="The DiffractionExperimentContext class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Helmholtz-Zentrum Hereon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>