<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The DiffractionExperimentContext class &mdash; pydidas</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/_css/pydidas-custom.css?v=9d9b2af9" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=9284fa43"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The ScanContext class" href="cmd_scan_context.html" />
    <link rel="prev" title="pydidas general command line tutorial" href="cmd_global.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4444AA" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pydidas
              <img src="../../_static/pydidas_snakes_circ_bg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                "24.01.18"
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../manuals.html">Manuals</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../commandline.html">Command line manuals</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cmd_global.html">pydidas general command line tutorial</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The DiffractionExperimentContext class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-the-diffractionexperimentcontext">Configuring the DiffractionExperimentContext</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#x-ray-energy-and-wavelength">X-ray energy and wavelength</a></li>
<li class="toctree-l5"><a class="reference internal" href="#the-detector">The detector</a></li>
<li class="toctree-l5"><a class="reference internal" href="#the-geometry">The geometry</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#import-and-export">Import and Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="#full-list-of-parameters-for-diffractionexperimentcontext">Full list of Parameters for DiffractionExperimentContext</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cmd_scan_context.html">The ScanContext class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_workflow_tree.html">The WorkflowTree class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_workflow_results.html">The WorkflowResults class</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_running_workflows.html">Running pydidas workflows from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cmdline_apps/cmd_apps.html">Command line applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gui/graphical_user_interface.html">Graphical user interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../code/code_documentation.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide.html">Developer guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #4444AA" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pydidas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../manuals.html">Manuals</a></li>
          <li class="breadcrumb-item"><a href="../commandline.html">Command line manuals</a></li>
      <li class="breadcrumb-item active">The DiffractionExperimentContext class</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manuals/cmdline_global/cmd_diffraction_exp_context.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-diffractionexperimentcontext-class">
<span id="diffraction-exp-context"></span><h1>The DiffractionExperimentContext class<a class="headerlink" href="#the-diffractionexperimentcontext-class" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#configuring-the-diffractionexperimentcontext" id="id2">Configuring the DiffractionExperimentContext</a></p>
<ul>
<li><p><a class="reference internal" href="#x-ray-energy-and-wavelength" id="id3">X-ray energy and wavelength</a></p></li>
<li><p><a class="reference internal" href="#the-detector" id="id4">The detector</a></p></li>
<li><p><a class="reference internal" href="#the-geometry" id="id5">The geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#import-and-export" id="id6">Import and Export</a></p></li>
<li><p><a class="reference internal" href="#full-list-of-parameters-for-diffractionexperimentcontext" id="id7">Full list of Parameters for DiffractionExperimentContext</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code>
is the pydidas Singleton instance of the
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperiment</span></code></a>
class. It is used for storing and accessing global information about the
experimental setup. Stored information include</p>
<ul class="simple">
<li><p>X-ray energy</p></li>
<li><p>detector model (pixel numbers and sizes)</p></li>
<li><p>detector geometry.</p></li>
</ul>
<p>All objects are stored as <a class="reference internal" href="../../code/api/core/parameter.html#pydidas.core.Parameter" title="pydidas.core.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and
can be accesses as described in the basic tutorial. A full list of Parameters is
given in <a class="reference internal" href="#diffraction-exp-context-parameters"><span class="std std-ref">Full list of Parameters for DiffractionExperimentContext</span></a>.</p>
<p>Its instance can be obtained by running the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="configuring-the-diffractionexperimentcontext">
<h2>Configuring the DiffractionExperimentContext<a class="headerlink" href="#configuring-the-diffractionexperimentcontext" title="Link to this heading"></a></h2>
<section id="x-ray-energy-and-wavelength">
<h3>X-ray energy and wavelength<a class="headerlink" href="#x-ray-energy-and-wavelength" title="Link to this heading"></a></h3>
<p>The X-ray energy and wavelength are two coupled Parameters and any changes to
one will cause the other Parameter to be updated as well. They can be accessed
through the keys <code class="xref py py-data docutils literal notranslate"><span class="pre">xray_energy</span></code> and <code class="xref py py-data docutils literal notranslate"><span class="pre">xray_wavelength</span></code>,
respectively.</p>
<p>Please see also the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_wavelength&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">12.398</span>

<span class="go"># Now, set the wavelength and check the energy:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;xray_wavelength&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">)</span>
<span class="go">6.199209921660013</span>

<span class="go"># Or change the X-ray energy:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;xray_energy&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;xray_wavelength&#39;</span><span class="p">)</span>
<span class="go">1.0332016536100022</span>
</pre></div>
</div>
</section>
<section id="the-detector">
<h3>The detector<a class="headerlink" href="#the-detector" title="Link to this heading"></a></h3>
<p>The detector is defined by the following Parameters:</p>
<table class="tight-table docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>unit</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>detector_name</p></td>
<td><p>str</p></td>
<td><p>n/a</p></td>
<td><p>The detector name in pyFAI nomenclature.</p></td>
</tr>
<tr class="row-odd"><td><p>detector_npixx</p></td>
<td><p>int</p></td>
<td><p>pixel</p></td>
<td><p>The number of detector pixels in x direction (horizontal).</p></td>
</tr>
<tr class="row-even"><td><p>detector_npixy</p></td>
<td><p>int</p></td>
<td><p>pixel</p></td>
<td><p>The number of detector pixels in y direction (vertical).</p></td>
</tr>
<tr class="row-odd"><td><p>detector_pxsizex</p></td>
<td><p>float</p></td>
<td><p>um</p></td>
<td><p>The detector pixel size in X-direction.</p></td>
</tr>
<tr class="row-even"><td><p>detector_pxsizey</p></td>
<td><p>float</p></td>
<td><p>um</p></td>
<td><p>The detector pixel size in Y-direction.</p></td>
</tr>
<tr class="row-odd"><td><p>detector_mask_file (optional)</p></td>
<td><p>str</p></td>
<td><p>n/a</p></td>
<td><p>The path and filename for the detector mask file. This file is used in
pyFAI integration plugins.</p></td>
</tr>
</tbody>
</table>
<p>The <code class="xref py py-data docutils literal notranslate"><span class="pre">detector_name</span></code> is only relevant for referencing any pyFAI object
but is included in the metainformation and should be set correctly. The
Parameters for numbers of pixels and pixelsize exactly what the name suggests.</p>
<section id="defining-the-detector-manually">
<h4>Defining the detector manually<a class="headerlink" href="#defining-the-detector-manually" title="Link to this heading"></a></h4>
<p>The detector can be defined manually if required, for example for a prototype
detector which is not inclued in pyFAI, by setting all Parameters values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_name&#39;</span><span class="p">,</span> <span class="s1">&#39;A detector with very small asymmetric pixels&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_npixx&#39;</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_npixy&#39;</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_pxsizex&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_pxsizey&#39;</span><span class="p">,</span> <span class="mf">12.5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-a-pyfai-detector">
<h4>Using a pyFAI detector<a class="headerlink" href="#using-a-pyfai-detector" title="Link to this heading"></a></h4>
<p>If the detector is defined in pyFAI, this library can be used to update the
detector settings automatically by giving the detector name in the
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment.set_detector_params_from_name" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment.set_detector_params_from_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_detector_params_from_name</span></code></a>
method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_detector_params_from_name</span><span class="p">(</span><span class="s1">&#39;Eiger 9M&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;detector_name&#39;</span><span class="p">)</span>
<span class="go">&#39;Eiger 9M&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;detector_npixx&#39;</span><span class="p">)</span>
<span class="go">3110</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;detector_npixy&#39;</span><span class="p">)</span>
<span class="go">3269</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;detector_pxsizex&#39;</span><span class="p">)</span>
<span class="go">75.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="s1">&#39;detector_pxsizey&#39;</span><span class="p">)</span>
<span class="go">75.0</span>
</pre></div>
</div>
</section>
</section>
<section id="the-geometry">
<h3>The geometry<a class="headerlink" href="#the-geometry" title="Link to this heading"></a></h3>
<p>pydidas uses the pyFAI geometry. In short, it uses the point of normal
incidence (PONI), the orthogonal projection of the origin (i.e. the sample) on
the detector.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The pyFAI geometry is described in detail in this pyFAI document:
<a class="reference external" href="https://pyfai.readthedocs.io/en/master/geometry.html#default-geometry-in-pyfai">Default geometry in pyFAI</a>.</p>
</div>
<p>The pyFAI coordinate system used the <span class="math notranslate nohighlight">\(x_1\)</span> (up), <span class="math notranslate nohighlight">\(x_2\)</span> and
<span class="math notranslate nohighlight">\(x_3\)</span> (along the beam direction) coordinates. The <span class="math notranslate nohighlight">\(x_2\)</span> axis is
defined to create a right-handed coordinate system with the <span class="math notranslate nohighlight">\(x_1\)</span> and
<span class="math notranslate nohighlight">\(x_3\)</span> axes.</p>
<p>The PONI defines the <span class="math notranslate nohighlight">\(x_1\)</span> and <span class="math notranslate nohighlight">\(x_2\)</span> coordinates of the detector
(measured from the origin at the top left corner) and the distance in beam
direction defines the <span class="math notranslate nohighlight">\(x_3\)</span> coordinate (detector distance).</p>
<p>Three rotations (<span class="math notranslate nohighlight">\(rot_1\)</span>: mathmatically negative around the axis pointing
up; <span class="math notranslate nohighlight">\(rot_2\)</span>: mathematically negative around the <span class="math notranslate nohighlight">\(x_2\)</span> axis;
<span class="math notranslate nohighlight">\(rot_3\)</span>: mathematically positive (!) around the X-ray beam direction) are
used to move the detector with respect to the origin (sample) are applied to
the detector to transform the detector geometry into the experimental geometry.</p>
<p>The correspondence between pyFAI geometry and pydidas DiffractionExperimentContext
Parameter names is given below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>pyFAI parameter name</p></th>
<th class="head"><p>corresponding pydidas Parameter</p></th>
<th class="head"><p>unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(poni_1\)</span></p></td>
<td><p>detector_poni1</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(poni_2\)</span></p></td>
<td><p>detector_poni2</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(dist\)</span></p></td>
<td><p>detector_dist</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(rot_1\)</span></p></td>
<td><p>detector_rot1</p></td>
<td><p>rad</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(rot_2\)</span></p></td>
<td><p>detector_rot2</p></td>
<td><p>rad</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(rot_3\)</span></p></td>
<td><p>detector_rot3</p></td>
<td><p>rad</p></td>
</tr>
</tbody>
</table>
<section id="defining-the-geometry">
<h4>Defining the geometry<a class="headerlink" href="#defining-the-geometry" title="Link to this heading"></a></h4>
<p>These Parameters can be accessed and updated by the pydidas Parameter names as
given in the table above. For an example, see below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_poni1&#39;</span><span class="p">,</span> <span class="mf">0.114731</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_poni2&#39;</span><span class="p">,</span> <span class="mf">0.123635</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_dist&#39;</span><span class="p">,</span> <span class="mf">0.235885</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_rot1&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.011062669</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_rot2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002172149</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;detector_rot3&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="import-and-export">
<h2>Import and Export<a class="headerlink" href="#import-and-export" title="Link to this heading"></a></h2>
<p>The DiffractionExperimentContext settings can be imported and exported to files, based on
the available im-/exporters. The standard distribution ships with support for
YAML files and pyFAI .poni files. Both types are supported for import and
export. The format will be determined automatically based on the file extension.</p>
<p>Imports and exports are started by calling the
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment.import_from_file" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment.import_from_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">import_from_file(filename)</span></code></a>
and
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment.export_to_file" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment.export_to_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">export_to_file(filename)</span></code></a>,
respectively. The filename must include the absolute path to the file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Importing the <a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.diffraction_exp_context.DiffractionExperiment" title="pydidas.contexts.diffraction_exp_context.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code></a>
from file will overwrite all current values without asking for confirmation.</p>
</div>
<p>An example to demonstrate these methods is given below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">contexts</span><span class="o">.</span><span class="n">DiffractionExperimentContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_values_as_dict</span><span class="p">()</span>
<span class="go">{&#39;xray_wavelength&#39;: 1,</span>
<span class="go"> &#39;xray_energy&#39;: 12.398,</span>
<span class="go"> &#39;detector_name&#39;: &#39;detector&#39;,</span>
<span class="go"> &#39;detector_npixx&#39;: 0,</span>
<span class="go"> &#39;detector_npixy&#39;: 0,</span>
<span class="go"> &#39;detector_pxsizex&#39;: -1,</span>
<span class="go"> &#39;detector_pxsizey&#39;: -1,</span>
<span class="go"> &#39;detector_dist&#39;: 1,</span>
<span class="go"> &#39;detector_poni1&#39;: 0,</span>
<span class="go"> &#39;detector_poni2&#39;: 0,</span>
<span class="go"> &#39;detector_rot1&#39;: 0,</span>
<span class="go"> &#39;detector_rot2&#39;: 0,</span>
<span class="go"> &#39;detector_rot3&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">export_to_file</span><span class="p">(</span><span class="s1">&#39;/scratch/exp_settings_test.yaml&#39;</span><span class="p">)</span>

<span class="go"># now, we update the local settings:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">set_detector_params_from_name</span><span class="p">(</span><span class="s1">&#39;Eiger 9M&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_values_as_dict</span><span class="p">()</span>
<span class="go">{&#39;xray_wavelength&#39;: 1,</span>
<span class="go"> &#39;xray_energy&#39;: 12.398,</span>
<span class="go"> &#39;detector_name&#39;: &#39;Eiger 9M&#39;,</span>
<span class="go"> &#39;detector_npixx&#39;: 3110,</span>
<span class="go"> &#39;detector_npixy&#39;: 3269,</span>
<span class="go"> &#39;detector_pxsizex&#39;: 75.0,</span>
<span class="go"> &#39;detector_pxsizey&#39;: 75.0,</span>
<span class="go"> &#39;detector_dist&#39;: 1,</span>
<span class="go"> &#39;detector_poni1&#39;: 0,</span>
<span class="go"> &#39;detector_poni2&#39;: 0,</span>
<span class="go"> &#39;detector_rot1&#39;: 0,</span>
<span class="go"> &#39;detector_rot2&#39;: 0,</span>
<span class="go"> &#39;detector_rot3&#39;: 0}</span>

<span class="go"># If we load the settings from the stored file, these settings will be lost</span>
<span class="go"># and the saved state will be restored:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">import_from_file</span><span class="p">(</span><span class="s1">&#39;/scratch/exp_settings_test.yaml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EXP</span><span class="o">.</span><span class="n">get_param_values_as_dict</span><span class="p">()</span>
<span class="go">{&#39;xray_wavelength&#39;: 1,</span>
<span class="go"> &#39;xray_energy&#39;: 12.398,</span>
<span class="go"> &#39;detector_name&#39;: &#39;detector&#39;,</span>
<span class="go"> &#39;detector_npixx&#39;: 0,</span>
<span class="go"> &#39;detector_npixy&#39;: 0,</span>
<span class="go"> &#39;detector_pxsizex&#39;: -1,</span>
<span class="go"> &#39;detector_pxsizey&#39;: -1,</span>
<span class="go"> &#39;detector_dist&#39;: 1,</span>
<span class="go"> &#39;detector_poni1&#39;: 0,</span>
<span class="go"> &#39;detector_poni2&#39;: 0,</span>
<span class="go"> &#39;detector_rot1&#39;: 0,</span>
<span class="go"> &#39;detector_rot2&#39;: 0,</span>
<span class="go"> &#39;detector_rot3&#39;: 0}</span>
</pre></div>
</div>
<span class="target" id="diffraction-exp-context-parameters"></span></section>
<section id="full-list-of-parameters-for-diffractionexperimentcontext">
<h2>Full list of Parameters for DiffractionExperimentContext<a class="headerlink" href="#full-list-of-parameters-for-diffractionexperimentcontext" title="Link to this heading"></a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>xray_wavelength (float, unit: Angstrom, default: 1.0)</dt><dd><p>The X-ray wavelength. Any changes to the wavelength will also update
the X-ray energy setting.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>xray_energy (float, unit: keV, default: 12.398)</dt><dd><p>The X-ray energy. Changing this parameter will also update the X-ray
wavelength setting.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_name (str, default: “detector”)</dt><dd><p>The detector name (in pyFAI nomenclature if used for automatic
configuration).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_npixx (int, default: 0)</dt><dd><p>The number of detector pixels in x direction (horizontal).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_npixy (int, default: 0)</dt><dd><p>The number of detector pixels in x direction (vertical).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_pxsizex (float, unit: um, default: -1)</dt><dd><p>The detector pixel size in X-direction.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_pxsizey (float, unit: um, default: -1)</dt><dd><p>The detector pixel size in Y-direction.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_mask_file (str, default: .)</dt><dd><p>The path to the detector mask file. If empty, this defaults to no detector
mask.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_dist (float, unit: m, default: 1.0)</dt><dd><p>The sample-detector distance.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_poni1 (float, unit: m, default: 0.0)</dt><dd><p>The detector PONI1 (point of normal incidence; in y direction). This is
measured in meters from the detector origin.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_poni2 (float, unit: m, default: 0.0)</dt><dd><p>The detector PONI2 (point of normal incidence; in x direction). This is
measured in meters from the detector origin.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot1 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 1 (yaw; lefthanded around the “up”-axis)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot2 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 2 (pitching the detector; positive direction is
tilting the detector top upstream while keeping the bottom of the
detector stationary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot3 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 3 (roll; around the beam axis; right-handed when
looking downstream with the beam.)</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmd_global.html" class="btn btn-neutral float-left" title="pydidas general command line tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmd_scan_context.html" class="btn btn-neutral float-right" title="The ScanContext class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Helmholtz-Zentrum Hereon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>