
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using the pydidas processing pipeline &#8212; pydidas</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/_css/pydidas-custom.css?v=9d9b2af9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=6d92c56a"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'manuals/gui/recipes/pydidas_processing';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/hereon-GEMS/pydidas/_gh_pages_release_versions/pydata_version_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '24.03.25';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Code documentation" href="../../../code/code_documentation.html" />
    <link rel="prev" title="Composite image creator frame" href="../frames/CompositeCreatorFrame.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/pydidas_snakes_circ_bg.png" class="logo__image only-light" alt="pydidas"/>
    <script>document.write(`<img src="../../../_static/pydidas_snakes_circ_bg.png" class="logo__image only-dark" alt="pydidas"/>`);</script>
  
  
    <p class="title logo__title"> pydidas</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../manuals.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../code/code_documentation.html">
    Code documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../developer_guide.html">
    Developer guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/hereon-GEMS/pydidas" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../manuals.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../code/code_documentation.html">
    Code documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../developer_guide.html">
    Developer guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/hereon-GEMS/pydidas" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../commandline.html">Command line manuals</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../graphical_user_interface.html">Graphical user interface</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../menu.html">The menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing_parameters.html">Editing Parameters in the GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../silx/plots.html">Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/DataBrowsingFrame.html">Data browsing frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/PyfaiCalibFrame.html">pyFAI calibration frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/DirectorySpyFrame.html">Directory spy frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/QuickIntegrationFrame.html">Quick Integration frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/ImageMathFrame.html">Image math frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/DefineDiffractionExpFrame.html">DefineDiffractionExpFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/DefineScanFrame.html">Define scan frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/WorkflowEditFrame.html">Workflow edit frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/WorkflowTestFrame.html">Workflow test frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/WorkflowRunFrame.html">Run full workflow frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/ViewResultsFrame.html">View workflow results frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/UtilitiesFrame.html">Utilities frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/ImageSeriesOperationsWindow.html">Image series operations window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/MaskEditorWindow.html">Mask editor window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/ExportEigerPixelmaskWindow.html">Export Eiger pixel mask window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/_UserConfigWindow.html">The User config window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/_GlobalSettingsWindow.html">The Global settings window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/TweakPluginParameterWindow.html">Tweak Plugin Parameters window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/ShowDetailedPluginResultsWindow.html">Show Detailed Plugin Results window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/ManuallySetBeamcenterWindow.html">Manually Set Beamcenter Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../windows/SelectIntegrationRegionWindow.html">Select integration region window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/CompositeCreatorFrame.html">Composite image creator frame</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Using the pydidas processing pipeline</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../manuals.html" class="nav-link">Manuals</a></li>
    
    
    <li class="breadcrumb-item"><a href="../graphical_user_interface.html" class="nav-link">Graphical user interface</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Using the...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="using-the-pydidas-processing-pipeline">
<h1>Using the pydidas processing pipeline<a class="headerlink" href="#using-the-pydidas-processing-pipeline" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#detector-calibration" id="id8">1. Detector calibration</a></p></li>
<li><p><a class="reference internal" href="#define-the-experimental-setup" id="id9">2. Define the experimental setup</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id10">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#define-the-scan" id="id11">3. Define the scan</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id12">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#creating-the-workflow" id="id13">4. Creating the workflow</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id14">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#testing-the-workflow" id="id15">5. Testing the workflow</a></p>
<ul>
<li><p><a class="reference internal" href="#plugin-details" id="id16">5.1 Plugin details</a></p></li>
<li><p><a class="reference internal" href="#tweaking-parameters" id="id17">5.2 Tweaking Parameters</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id18">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-the-full-workflow" id="id19">6. Running the full workflow</a></p></li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While setting up and using the pydidas processing pipeline is also available
from the command line, creating and editing the
<a class="reference internal" href="../../../code/api/workflow/workflow.html#pydidas.workflow.ProcessingTree" title="pydidas.workflow.processing_tree.ProcessingTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowTree</span></code></a>,
<a class="reference internal" href="../../../code/api/contexts.html#pydidas.contexts.diff_exp.DiffractionExperiment" title="pydidas.contexts.diff_exp.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code></a>, and
<a class="reference internal" href="../../../code/api/contexts.html#pydidas.contexts.scan.Scan" title="pydidas.contexts.scan.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanContext</span></code></a> are more easily
done in the graphical user interface and therefore, this guide covers
the GUI.</p>
</div>
<p>To process data from scratch, the following steps need to be performed:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Perform the detector calibration (in pyFAI geometry)</p></li>
<li><p>Define the experimental setup (X-ray energy, detector, geometry) using
the calibration.</p></li>
<li><p>Define the scan (paths, filenames and scanpoints).</p></li>
<li><p>Define the workflow which defines which operations to perform on the
data.</p></li>
<li><p>Test the workflow and tweak processing parameters (optional).</p></li>
<li><p>Run workflow and save results.</p></li>
</ol>
</div></blockquote>
<p>Each of the steps will be explained in detail below. Also, an example will be
used for demonstration of each step.</p>
<section id="detector-calibration">
<h2>1. Detector calibration<a class="headerlink" href="#detector-calibration" title="Link to this heading">#</a></h2>
<p>The detector calibration can best be performed using the <em>pyFAI-calib2</em> tool.
A version of this tool is implemented in pydidas and can be accessed directly
through the toolbar menu on the left (circled in orange):</p>
<a class="reference internal image-reference" href="../../../_images/01_calib.png"><img alt="../../../_images/01_calib.png" class="align-center" src="../../../_images/01_calib.png" style="width: 400px;" /></a>
<p>For a tutorial on how to use the <em>pyFAI-calib2</em> tool, please refer directly
to the <a class="reference external" href="https://pyfai.readthedocs.io/en/master/usage/cookbook/calib-gui/index.html#cookbook-calibration-gui">pyFAI calibration tutorial</a>.</p>
</section>
<section id="define-the-experimental-setup">
<h2>2. Define the experimental setup<a class="headerlink" href="#define-the-experimental-setup" title="Link to this heading">#</a></h2>
<a class="reference internal image-reference" href="../../../_images/02_exp_setup.png"><img alt="../../../_images/02_exp_setup.png" class="align-left" src="../../../_images/02_exp_setup.png" style="width: 300px;" /></a>
<p>The pydidas frame to edit the experimental setup can be accessed through the
<em>Workflow processing</em> -&gt; <em>Define experimental setup</em> toolbar entries (marked
in orange on the left).</p>
<p>If you just performed the detector calibration, use the 2nd button from the top
<em>Copy all experimental parameters from calibration</em> to automatically update
all Parameter values, with the exception of the detector mask.</p>
<p>If you want to re-use a previous detector calibration, use the topmost button
<em>import experimerimental parameters from file</em> to open a file selection
dialogue. After confirming the selected file, the parameters are updated.
Note that the <em>detector mask file</em> parameter is not included in pyFAI’s
.poni file format and is not updated when importing a poni file.</p>
<p>The <em>detector mask file</em> must be set independently of the pyFAI calibration
parameter import, if it has not been set in the pyFAI calibration.</p>
<p>For more details, please refer to the <a class="reference internal" href="../frames/DefineDiffractionExpFrame.html#define-diffraction-exp-frame"><span class="std std-ref">DefineDiffractionExpFrame</span></a>
manual.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<p>The example has been performed at an X-ray energy of 13 keV using an Eiger 9M
detector. This information was available from the beamline. The mask file for
the detector was saved at <em>E:testeiger_mask.npy</em> (in numpy binary format).
All the information was copied from the detector calibration.</p>
</section>
</section>
<section id="define-the-scan">
<h2>3. Define the scan<a class="headerlink" href="#define-the-scan" title="Link to this heading">#</a></h2>
<a class="reference internal image-reference" href="../../../_images/03_scan_setup.png"><img alt="../../../_images/03_scan_setup.png" class="align-center" src="../../../_images/03_scan_setup.png" style="width: 400px;" /></a>
<p>Scan parameters and metadata can be edited on the <em>define scan</em> frame which can
be accessed through the <em>Workflow processing</em> -&gt; <em>Define scan</em> toolbar entries
(marked in orange in the image above).</p>
<p>All of the <em>global scan parameters</em> (except for the scan title) found in the
left column are mandatory, whereas on the number of scan points is mandatory
for each scan dimension.</p>
<p>The parameters for the scan base directory and naming pattern allow pydidas to
find the data and read the correct files. The number of scan points in each scan
dimension allows pydidas to re-arrange the input data in the correct shape.
The additional parameters for the individual scan dimensions are used for
annotating the results and for giving meaningful values to the dimensions but
they are not strictly necessary.</p>
<p>For more information, please refer to the <a class="reference internal" href="../frames/DefineScanFrame.html#define-scan-frame"><span class="std std-ref">Define scan frame</span></a> manual.</p>
<section id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>In the example used in the image above, the individual image files are located
in the E:testraw directory and the data files are named test_00010_data.h5,
test_00011_data.h5, etc. (therefore, the starting index is set to 10).</p>
<p>One image was acquired at each scan point in a mesh of 25 x 25 points.</p>
</section>
</section>
<section id="creating-the-workflow">
<h2>4. Creating the workflow<a class="headerlink" href="#creating-the-workflow" title="Link to this heading">#</a></h2>
<a class="reference internal image-reference" href="../../../_images/04_workflow_setup.png"><img alt="../../../_images/04_workflow_setup.png" class="align-center" src="../../../_images/04_workflow_setup.png" style="width: 400px;" /></a>
<p>To create the workflow, select the <em>Workflow processing</em> - &gt; <em>Workflow editing</em>
toolbar entry (marked in orange in the image above).
The workflow is comprised of individual plugins which each perform a single
task, like frame loading, azimuthal integration, background correction,
peak fitting. The workflow can branch downward in an unlimited number of nodes
(subject to processing resources).</p>
<p>Use the Plugin browser at the bottom of the frame to display more information
about and to select plugins. Double click on any plugin to add it as child to
the current plugin or use the right mouse button on a Plugin to open a menu with
additional options.</p>
<p>Clicking on a plugin in the field at the top selects it and opens these plugin’s
parameters on the right side for editing. Plugins can also be rearranged by
drag &amp; drop.</p>
<p>For additional information, please refer to the <a class="reference internal" href="../frames/WorkflowEditFrame.html#workflow-edit-frame"><span class="std std-ref">Workflow edit frame</span></a>
manual.</p>
<p>Note that pydidas by default only stores the result of leaves (i.e. plugins
which have no children). If you want to store additional results, please set the
<em>Always store results</em> parameter to <code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code>.</p>
<section id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>In the example used above, the plugins have been used with most of their default
settings. Only the radial integration has been limited to [5, 30] degrees in the
<em>pyFAI azimuthal integration</em> plugin (to have a region with a smooth background
which can be well subtracted) and the <em>Fit single peak</em> has been changed to use
a Lorentzian function and to set the limits.</p>
</section>
</section>
<section id="testing-the-workflow">
<h2>5. Testing the workflow<a class="headerlink" href="#testing-the-workflow" title="Link to this heading">#</a></h2>
<a class="reference internal image-reference" href="../../../_images/05_workflow_test.png"><img alt="../../../_images/05_workflow_test.png" class="align-center" src="../../../_images/05_workflow_test.png" style="width: 400px;" /></a>
<p>Once the parameters for Experiment, Scan and and Workflow have been configured,
the Workflow can be tested. Select the <em>Workflow processing</em> - &gt; <em>Test Workflow</em>
toolbar entry (marked in orange in the image above).</p>
<p>Pick a good datapoint by using either the image number or scan indices and click
the button <em>Process frame</em> to run the workflow locally. Note: To avoid overhead,
the workflow is executed in the same process and is blocking. Especially using
any pyFAI integration for the first time will require a few seconds to set up
the matrix tables.</p>
<p>The <em>Results</em> dropdown selection allows to see the results for any plugin in the
workflow. The textbox on the left gives you additional information about the
plugin results, the window on the right plots the 2d image or 1d curve.
If you are not happy with the results, select the <em>Tweak plugin
parameters</em> button at the bottom to open a new window and edit this plugin’s
parameters.</p>
<section id="plugin-details">
<h3>5.1 Plugin details<a class="headerlink" href="#plugin-details" title="Link to this heading">#</a></h3>
<p>Some plugins allow to inspect detailed results which can be anything and which
are defined in each plugin. The <em>Show detailed results for plugin</em> button opens
a new window with the details for the selected plugin.</p>
<a class="reference internal image-reference" href="../../../_images/05a_test_details.png"><img alt="../../../_images/05a_test_details.png" class="align-center" src="../../../_images/05a_test_details.png" style="width: 400px;" /></a>
<p>Depending on the plugin, several images or plots can be shown in this window.
All plots are labelled. More information, including a legend, can be accessed
through the <em>Options</em> at the bottom of the plot.</p>
</section>
<section id="tweaking-parameters">
<h3>5.2 Tweaking Parameters<a class="headerlink" href="#tweaking-parameters" title="Link to this heading">#</a></h3>
<p>Using the <em>Tweak plugin parameters</em> button on the <em>Test Workflow</em> frame opens
a new window which allows to modify Plugin parameters in place.</p>
<a class="reference internal image-reference" href="../../../_images/05b_test_tweak.png"><img alt="../../../_images/05b_test_tweak.png" class="align-center" src="../../../_images/05b_test_tweak.png" style="width: 400px;" /></a>
<p>The <em>Run plugin with current parameters</em> will run the current plugin only and
display its results (and its details, if the plugin has them defined). Once
you have configured the plugin to your wishes, use the <em>Confirm current
parameters and close window</em> button. This will also run any child plugins with
the updated input data again.</p>
</section>
<section id="id3">
<h3>Example<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>The resulting outputs for each plugin in the workflow are shown below:</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../../_images/05c_test_loader.png"><img alt="../../../_images/05c_test_loader.png" src="../../../_images/05c_test_loader.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text">The imported image from the loader.</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../../../_images/05d_test_int.png"><img alt="../../../_images/05d_test_int.png" src="../../../_images/05d_test_int.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text">The azimuthally integrated data.</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../../_images/05e_test_outliers.png"><img alt="../../../_images/05e_test_outliers.png" src="../../../_images/05e_test_outliers.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text">The data after outlier removal.</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../../_images/05f_test_bg_sub.png"><img alt="../../../_images/05f_test_bg_sub.png" src="../../../_images/05f_test_bg_sub.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text">The data after polynomial background removal.</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="running-the-full-workflow">
<h2>6. Running the full workflow<a class="headerlink" href="#running-the-full-workflow" title="Link to this heading">#</a></h2>
<a class="reference internal image-reference" href="../../../_images/06_workflow_run.png"><img alt="../../../_images/06_workflow_run.png" class="align-center" src="../../../_images/06_workflow_run.png" style="width: 400px;" /></a>
<p>Once you are confident that everything is configured correctly, select the
<em>Workflow processing</em> - &gt; <em>Run full Workflow</em> toolbar entry (marked in orange
in the image above). This will open the <em>Run full workflow</em> frame which allows
to run the workflow in separate processes in the background and to visualize
the results.</p>
<p>The <em>Start processing</em> button opens background processes, which perform the
actual processing and only communicate their results. Starting these processes
takes some time and once results come in, you can select one of the nodes from
the drop-down on the left to display their results. For details, please refer
to the <a class="reference internal" href="../frames/WorkflowRunFrame.html#workflow-run-frame"><span class="std std-ref">Run full workflow frame manual</span></a>.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../frames/CompositeCreatorFrame.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Composite image creator frame</p>
      </div>
    </a>
    <a class="right-next"
       href="../../../code/code_documentation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Code documentation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#detector-calibration">1. Detector calibration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-experimental-setup">2. Define the experimental setup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-scan">3. Define the scan</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-workflow">4. Creating the workflow</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-workflow">5. Testing the workflow</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plugin-details">5.1 Plugin details</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tweaking-parameters">5.2 Tweaking Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-full-workflow">6. Running the full workflow</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/manuals/gui/recipes/pydidas_processing.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023 - 2024, Helmholtz-Zentrum Hereon.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>