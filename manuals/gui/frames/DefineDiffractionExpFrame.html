<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DefineDiffractionExpFrame &mdash; pydidas</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/_css/pydidas-custom.css?v=9d9b2af9" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=f6546a40"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Define scan frame" href="DefineScanFrame.html" />
    <link rel="prev" title="Image math frame" href="ImageMathFrame.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4444AA" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            pydidas
              <img src="../../../_static/pydidas_snakes_circ_bg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                "24.03.25"
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../manuals.html">Manuals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../commandline.html">Command line manuals</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../graphical_user_interface.html">Graphical user interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../graphical_user_interface.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../graphical_user_interface.html#the-ui-state">The UI state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../graphical_user_interface.html#generic-gui-information">Generic GUI information</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../graphical_user_interface.html#frames">Frames</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="DataBrowsingFrame.html">Data browsing frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="PyfaiCalibFrame.html">pyFAI calibration frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="DirectorySpyFrame.html">Directory spy frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="QuickIntegrationFrame.html">Quick Integration frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="ImageMathFrame.html">Image math frame</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">DefineDiffractionExpFrame</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#detailed-description-of-frame-items">Detailed description of frame items</a></li>
<li class="toctree-l5"><a class="reference internal" href="#using-the-diffracion-experiment-settings">Using the Diffracion Experiment settings</a></li>
<li class="toctree-l5"><a class="reference internal" href="#full-list-of-parameters-for-diffractionexperimentcontext">Full list of Parameters for DiffractionExperimentContext</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="DefineScanFrame.html">Define scan frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="WorkflowEditFrame.html">Workflow edit frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="WorkflowTestFrame.html">Workflow test frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="WorkflowRunFrame.html">Run full workflow frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViewResultsFrame.html">View workflow results frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="UtilitiesFrame.html">Utilities frame</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../graphical_user_interface.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../graphical_user_interface.html#recipes">Recipes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../code/code_documentation.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide.html">Developer guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #4444AA" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pydidas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../manuals.html">Manuals</a></li>
          <li class="breadcrumb-item"><a href="../graphical_user_interface.html">Graphical user interface</a></li>
      <li class="breadcrumb-item active">DefineDiffractionExpFrame</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/manuals/gui/frames/DefineDiffractionExpFrame.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="definediffractionexpframe">
<span id="define-diffraction-exp-frame"></span><h1>DefineDiffractionExpFrame<a class="headerlink" href="#definediffractionexpframe" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#detailed-description-of-frame-items" id="id1">Detailed description of frame items</a></p>
<ul>
<li><p><a class="reference internal" href="#import-settings" id="id2">Import settings</a></p></li>
<li><p><a class="reference internal" href="#copy-parameters-from-calibration" id="id3">Copy Parameters from calibration</a></p></li>
<li><p><a class="reference internal" href="#beamline-energy" id="id4">Beamline energy</a></p></li>
<li><p><a class="reference internal" href="#detector" id="id5">Detector</a></p></li>
<li><p><a class="reference internal" href="#detector-geometry" id="id6">Detector geometry</a></p></li>
<li><p><a class="reference internal" href="#export" id="id7">Export</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-the-diffracion-experiment-settings" id="id8">Using the Diffracion Experiment settings</a></p></li>
<li><p><a class="reference internal" href="#full-list-of-parameters-for-diffractionexperimentcontext" id="id9">Full list of Parameters for DiffractionExperimentContext</a></p></li>
</ul>
</nav>
<p>The <em>Define Diffrraction setup</em> frame is a graphical interface to configure the
<a class="reference internal" href="../../../code/api/contexts.html#pydidas.contexts.diff_exp.DiffractionExperiment" title="pydidas.contexts.diff_exp.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code></a>
which holds information about the experimental/beamline setup.</p>
<p>The frame only holds the configuration widgets:</p>
<a class="reference internal image-reference" href="../../../_images/full.png"><img alt="../../../_images/full.png" class="align-center" src="../../../_images/full.png" style="width: 540px;" /></a>
<section id="detailed-description-of-frame-items">
<h2>Detailed description of frame items<a class="headerlink" href="#detailed-description-of-frame-items" title="Link to this heading"></a></h2>
<section id="import-settings">
<h3>Import settings<a class="headerlink" href="#import-settings" title="Link to this heading"></a></h3>
<img alt="../../../_images/btn_import.png" class="align-left" src="../../../_images/btn_import.png" />
<p>Experimental settings can be import from file. Clicking the corresponding
button will open a selection dialogue to pick the file with the stored settings.
File extensions will be pre-selected based on the available importers.</p>
</section>
<section id="copy-parameters-from-calibration">
<span id="copy-from-calibration"></span><h3>Copy Parameters from calibration<a class="headerlink" href="#copy-parameters-from-calibration" title="Link to this heading"></a></h3>
<img alt="../../../_images/btn_copyall.png" class="align-left" src="../../../_images/btn_copyall.png" />
<p>If a calibration using the <a class="reference internal" href="PyfaiCalibFrame.html#pyfai-calib-frame"><span class="std std-ref">pyFAI calibration frame</span></a> has been performed during
the active session, clicking this button will copy all the required data from
the last successful fit in the pyFAI calibration tool.</p>
</section>
<section id="beamline-energy">
<h3>Beamline energy<a class="headerlink" href="#beamline-energy" title="Link to this heading"></a></h3>
<img alt="../../../_images/energy.png" class="align-left" src="../../../_images/energy.png" />
<p>The beamline energy can either be copied from the pyFAI calibration tool (see
<a class="reference internal" href="#copy-from-calibration"><span class="std std-ref">Copy Parameters from calibration</span></a>) or the user can update the values for either the
X-ray energy (in keV) or the wavelength (in A). Updating either of these values
will also modify the other value to keep them consistent.</p>
</section>
<section id="detector">
<h3>Detector<a class="headerlink" href="#detector" title="Link to this heading"></a></h3>
<img alt="../../../_images/detector.png" class="align-left" src="../../../_images/detector.png" />
<p>To select a detector and automatically update all detector Parameters, the
“Select X-ray detector” button will open a new window (using the
pyFAI DetectorSelectorDialog, see the screenshot below) which allows to select
a detector based on manufacturer and model.</p>
<a class="reference internal image-reference" href="../../../_images/det_popup.png"><img alt="../../../_images/det_popup.png" class="align-right" src="../../../_images/det_popup.png" style="width: 361px;" /></a>
<p>Confirming the selection in the dialogue will update the detector Parameters.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Alternatively, the detector can be taken from the the pyFAI calibration,
(see <a class="reference internal" href="#copy-from-calibration"><span class="std std-ref">Copy Parameters from calibration</span></a>) or all Parameters can also be entered
manually in the input fields.</p>
<p>The last field of the detector group, the <em>Detector pixel mask</em> determines if
a mask should be used for the pyFAI integration. This parameter is independent
of the other detector Parameters and is not updated with the selection of the
detector. If empty, no detector mask will be applied to the pyFAI integration.</p>
</section>
<section id="detector-geometry">
<h3>Detector geometry<a class="headerlink" href="#detector-geometry" title="Link to this heading"></a></h3>
<img alt="../../../_images/det_geo.png" class="align-left" src="../../../_images/det_geo.png" />
<p>pydidas uses the <a class="reference external" href="https://pyfai.readthedocs.io/en/master/geometry.html#default-geometry-in-pyfai">Default geometry in pyFAI</a>
and the detector position is described by the sample-detector distance, two
positions for the point of normal incidence on the detector (PONI1 in vertical
and PONI2 in hprizontal directions) which describe the orthogonal projection of
the origin (i.e. sample) on the detector and three rotations to modify the
detector position. Please refer to the pyFAI documentation for a detailed
description. For the user’s convenience, the derived beamcenter pixel position
in detector pixel coordinates is also displayed.</p>
<p>In addition to taking these settings from the pyFAI calibration (see
<a class="reference internal" href="#copy-from-calibration"><span class="std std-ref">Copy Parameters from calibration</span></a>) and manual Parameter updates , pydidas also offers
a tool for manually setting the beamcenter. The button <em>Manual beamcenter
definition</em> opens a new window. The window is described in detail in
<a class="reference internal" href="../windows/ManuallySetBeamcenterWindow.html#manually-set-beamcenter-window"><span class="std std-ref">Manually Set Beamcenter Window</span></a>.</p>
<a class="reference internal image-reference" href="../../../_images/from_fit2d.png"><img alt="../../../_images/from_fit2d.png" class="align-right" src="../../../_images/from_fit2d.png" style="width: 265px;" /></a>
<p>The button <em>Convert Fit2D geometry</em> allows to convert an existing calibration
in Fit2D geometry to pyFAI’s PONI geometry. Clicking the button temporarily
disables the frame’s inputs and opens a new  window to input the existing
calibration:
Input all parameters as required (sample-detector distance, beamcenter x/y,
detector tilt plane and tilt angle). The <em>Convet to pyFAI geometry</em> button will
calculate the resulting pyFAI geometry parameters and display them in the bottom
parameter fields. The <em>Accept and store pyFAI geometry</em> button will close the
window and copy the resulting geometry to the main frame.</p>
</section>
<section id="export">
<h3>Export<a class="headerlink" href="#export" title="Link to this heading"></a></h3>
<img alt="../../../_images/export.png" class="align-left" src="../../../_images/export.png" />
<p>All settings can be exported to file using the saving button. Clicking the
button will open a dialogue to select a filename. By default, a filename filter
for all supported extensions is active. The file type is selected automatically
based on the extension.</p>
</section>
</section>
<section id="using-the-diffracion-experiment-settings">
<h2>Using the Diffracion Experiment settings<a class="headerlink" href="#using-the-diffracion-experiment-settings" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../code/api/contexts.html#pydidas.contexts.diff_exp.DiffractionExperiment" title="pydidas.contexts.diff_exp.DiffractionExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code></a>
is not used directly by the user but the information is required in
applications, e.g. to run processing workflows or to determine the beam center
on the detector.</p>
</section>
<section id="full-list-of-parameters-for-diffractionexperimentcontext">
<h2>Full list of Parameters for DiffractionExperimentContext<a class="headerlink" href="#full-list-of-parameters-for-diffractionexperimentcontext" title="Link to this heading"></a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>xray_wavelength (float, unit: Angstrom, default: 1.0)</dt><dd><p>The X-ray wavelength. Any changes to the wavelength will also update
the X-ray energy setting.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>xray_energy (float, unit: keV, default: 12.398)</dt><dd><p>The X-ray energy. Changing this parameter will also update the X-ray
wavelength setting.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_name (str, default: “detector”)</dt><dd><p>The detector name (in pyFAI nomenclature if used for automatic
configuration).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_npixx (int, default: 0)</dt><dd><p>The number of detector pixels in x direction (horizontal).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_npixy (int, default: 0)</dt><dd><p>The number of detector pixels in x direction (vertical).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_pxsizex (float, unit: um, default: -1)</dt><dd><p>The detector pixel size in X-direction.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_pxsizey (float, unit: um, default: -1)</dt><dd><p>The detector pixel size in Y-direction.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_mask_file (str, default: .)</dt><dd><p>The path to the detector mask file. If empty, this defaults to no detector
mask.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_dist (float, unit: m, default: 1.0)</dt><dd><p>The sample-detector distance.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_poni1 (float, unit: m, default: 0.0)</dt><dd><p>The detector PONI1 (point of normal incidence; in y direction). This is
measured in meters from the detector origin.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_poni2 (float, unit: m, default: 0.0)</dt><dd><p>The detector PONI2 (point of normal incidence; in x direction). This is
measured in meters from the detector origin.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot1 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 1 (yaw; lefthanded around the “up”-axis)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot2 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 2 (pitching the detector; positive direction is
tilting the detector top upstream while keeping the bottom of the
detector stationary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>detector_rot3 (float, unit: rad, default: 0.0)</dt><dd><p>The detector rotation 3 (roll; around the beam axis; right-handed when
looking downstream with the beam.)</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ImageMathFrame.html" class="btn btn-neutral float-left" title="Image math frame" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DefineScanFrame.html" class="btn btn-neutral float-right" title="Define scan frame" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 - 2024, Helmholtz-Zentrum Hereon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>