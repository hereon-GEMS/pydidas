
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial for the ExecuteWorkflowApp &#8212; pydidas</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/_css/pydidas-custom.css?v=7afb26e6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=4487a728"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'manuals/cmdline_apps/cmd_execute_workflow_app';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/hereon-GEMS/pydidas/gh-pages-version-snapshots/pydata_version_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '"24.09.16"';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tutorial for the DirectorySpyApp" href="cmd_directory_spy_app.html" />
    <link rel="prev" title="Tutorial for the CompositeCreatorApp" href="cmd_composite_creator_app.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/pydidas_snakes_circ_bg.png" class="logo__image only-light" alt="pydidas"/>
    <script>document.write(`<img src="../../_static/pydidas_snakes_circ_bg.png" class="logo__image only-dark" alt="pydidas"/>`);</script>
  
  
    <p class="title logo__title"> pydidas</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../manuals_main.html">
    User manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../code/code_documentation.html">
    Code documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../dev_guide/developer_guide.html">
    Developer guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/hereon-GEMS/pydidas" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../manuals_main.html">
    User manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../code/code_documentation.html">
    Code documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../dev_guide/developer_guide.html">
    Developer guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/hereon-GEMS/pydidas" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Pydidas quick-start guide</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../commandline_start.html">Command line manuals</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_global.html">pydidas general command line tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_diffraction_exp_context.html">The DiffractionExperimentContext class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_scan_context.html">The ScanContext class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_workflow_tree.html">The WorkflowTree class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_workflow_results.html">The WorkflowResults class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline_global/cmd_running_workflows.html">Running pydidas workflows from the command line</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="cmd_apps.html">Command line applications</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cmd_running_apps.html">Running pydidas applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_composite_creator_app.html">Tutorial for the CompositeCreatorApp</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Tutorial for the ExecuteWorkflowApp</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmd_directory_spy_app.html">Tutorial for the DirectorySpyApp</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../gui/graphical_user_interface.html">Graphical user interface</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">





<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../manuals_main.html" class="nav-link">User manuals</a></li>
    
    
    <li class="breadcrumb-item"><i class="fa-solid fa-ellipsis"></i></li>
    
    
    <li class="breadcrumb-item"><a href="cmd_apps.html" class="nav-link">Command line applications</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Tutorial...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-for-the-executeworkflowapp">
<span id="execute-workflow-app"></span><h1>Tutorial for the ExecuteWorkflowApp<a class="headerlink" href="#tutorial-for-the-executeworkflowapp" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#motivation" id="id1">Motivation</a></p></li>
<li><p><a class="reference internal" href="#globally-controlled-settings" id="id2">Globally controlled settings</a></p></li>
<li><p><a class="reference internal" href="#setup-of-the-executeworkflowapp" id="id3">Setup of the ExecuteWorkflowApp</a></p>
<ul>
<li><p><a class="reference internal" href="#live-processing" id="id4">Live processing</a></p></li>
<li><p><a class="reference internal" href="#automatic-saving" id="id5">Automatic saving</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-the-executeworkflowapp" id="id6">Running the ExecuteWorkflowApp</a></p></li>
<li><p><a class="reference internal" href="#accessing-results" id="id7">Accessing results</a></p>
<ul>
<li><p><a class="reference internal" href="#using-autosave" id="id8">Using autosave</a></p></li>
<li><p><a class="reference internal" href="#accessing-results-within-python" id="id9">Accessing results within Python</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#list-of-all-executeworkflowapp-parameters" id="id10">List of all ExecuteWorkflowApp Parameters</a></p></li>
</ul>
</nav>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../../code/api/apps/execute_workflow_app.html#pydidas.apps.ExecuteWorkflowApp" title="pydidas.apps.ExecuteWorkflowApp"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecuteWorkflowApp</span></code></a> is one of
the most important objects in pydidas as it allows to process workflows. Note
that most of the configuration is not performed by the ExecuteWorkflowApp itself
but by the global objects for
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.scan.Scan" title="pydidas.contexts.scan.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanContext</span></code></a>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code>,
and <a class="reference internal" href="../../code/api/workflow/workflow.html#pydidas.workflow.ProcessingTree" title="pydidas.workflow.ProcessingTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowTree</span></code></a>.</p>
<p>Documentation on the use of these objects is given in <a class="reference internal" href="../cmdline_global/cmd_scan_context.html#scan-context"><span class="std std-ref">The ScanContext class</span></a>,
<a class="reference internal" href="../cmdline_global/cmd_diffraction_exp_context.html#diffraction-exp-context"><span class="std std-ref">The DiffractionExperimentContext class</span></a> and <a class="reference internal" href="../cmdline_global/cmd_workflow_tree.html#workflow-tree"><span class="std std-ref">The WorkflowTree class</span></a>, respectively.</p>
</section>
<section id="globally-controlled-settings">
<h2>Globally controlled settings<a class="headerlink" href="#globally-controlled-settings" title="Link to this heading">#</a></h2>
<p>Some settings for parallel processing additionally used by the
ExecuteWorkflowApp are controlled globally by pydidas. These are:</p>
<ul class="simple">
<li><p>The number of parallel worker processes (<cite>global/mp_n_workers</cite>)</p></li>
<li><p>The size of the data exchange buffer (in MB) (<cite>global/shared_buffer_size</cite>)</p></li>
<li><p>The number of datasets which can be held in the buffer
(<cite>global/shared_buffer_max_n</cite>)</p></li>
</ul>
<p>Because these settings will typically be set up once for each workstation and
then reused quite often, they have been implemented as global
<a class="reference internal" href="../cmdline_global/cmd_global.html#pydidas-qsettings"><span class="std std-ref">pydidas QSettings</span></a>.</p>
<p>The default values for multiprocessing are 4 worker processes, a maximum shared
buffer size of 100 MB and a maximum of 20 datasets in the buffer. These settings
should normally work quite well and it is not recommended to change them without
thorough thought.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For standard applications, the number of independent processes should not be
increased because pyFAI uses inherent multiprocessing in addition to the
pydidas multiprocessing and synergies can only be achieved by parallelizing
the processing and data loading.</p>
<p>Loading from disk with too many processes also slows all processes down as
the processes interfere with each other for file access to disk.</p>
<p>Only plugins with long serial computations (e.g. fitting, depending on
the implementation) might benefit from more processes but this has to be
weighted against disk access to the raw data.</p>
</div>
<p>The global detector mask file must be specified with the full and absolute path.
The detector mask can be supplied in any image format.</p>
<p>To modify these values, the user needs to create a QSettings instance and adjust
these values, if required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">PydidasQsettings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s1">&#39;global/mp_n_workers&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="setup-of-the-executeworkflowapp">
<h2>Setup of the ExecuteWorkflowApp<a class="headerlink" href="#setup-of-the-executeworkflowapp" title="Link to this heading">#</a></h2>
<p>The ExecuteWorkflowApp has only a very limited number of Parameters because it
uses the aforementioned objects (
<a class="reference internal" href="../../code/api/contexts.html#pydidas.contexts.scan.Scan" title="pydidas.contexts.scan.Scan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScanContext</span></code></a>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">DiffractionExperimentContext</span></code>,
and <a class="reference internal" href="../../code/api/workflow/workflow.html#pydidas.workflow.ProcessingTree" title="pydidas.workflow.ProcessingTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowTree</span></code></a>)
which include most of the required configuration.</p>
<p>In the app, only the flags for <em>live processing</em> and for automatic saving of
results need to be set.</p>
<section id="live-processing">
<h3>Live processing<a class="headerlink" href="#live-processing" title="Link to this heading">#</a></h3>
<p>The live processing flag determines whether pydidas will check all files at
the start of processing or accept file names without corresponding written
files. This flag is modified using the <code class="xref py py-data docutils literal notranslate"><span class="pre">live_processing</span></code> Parameter:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">ExecuteWorkflowApp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;live_processing&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="automatic-saving">
<h3>Automatic saving<a class="headerlink" href="#automatic-saving" title="Link to this heading">#</a></h3>
<p>The ExecuteWorkflowApp includes the possibility to write results dynamically to
disk as soon as they have been processed. The behaviour is controlled by the
<code class="xref py py-data docutils literal notranslate"><span class="pre">autosave_results``flag.</span> <span class="pre">A</span> <span class="pre">parent</span> <span class="pre">directory</span> <span class="pre">for</span> <span class="pre">all</span> <span class="pre">results</span> <span class="pre">must</span> <span class="pre">be</span>
<span class="pre">defined</span> <span class="pre">using</span> <span class="pre">the</span> <span class="pre">:py:data:`autosave_dir</span></code> Parameter and the saving format can
be selected using the <code class="xref py py-data docutils literal notranslate"><span class="pre">autosave_format</span></code> Parameter. The different
formats are predefined and only implemented formats can be chosen. To query the
available choices, please look at the code in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">ExecuteWorkflowApp</span><span class="p">()</span>

<span class="go"># We will activate the auto-saving and specify the path:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;autosave_results&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;autosave_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;/scratch/data/scan42_results&#39;</span><span class="p">)</span>

<span class="go"># To check, for the available formats, we need to get the Parameter and check</span>
<span class="go"># its choices property:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;autosave_format&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">choices</span>
<span class="go">[&#39;None&#39;, &#39;HDF5&#39;]</span>

<span class="go"># Now, update the formats:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">set_param_value</span><span class="p">(</span><span class="s1">&#39;autosave_format&#39;</span><span class="p">,</span> <span class="s1">&#39;HDF5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that auto-saving each frame will result will have a significant
performance cost because the output files will need to be accessed for
each processed scan point. Using auto-saving is only encouraged for very
long processing times, e.g. multiple fittings for each scan data point.</p>
</div>
</section>
</section>
<section id="running-the-executeworkflowapp">
<h2>Running the ExecuteWorkflowApp<a class="headerlink" href="#running-the-executeworkflowapp" title="Link to this heading">#</a></h2>
<p>Once configured, the <a class="reference internal" href="../../code/api/apps/execute_workflow_app.html#pydidas.apps.ExecuteWorkflowApp" title="pydidas.apps.ExecuteWorkflowApp"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecuteWorkflowApp</span></code></a>
is run like any pydidas app, as described in detail in
<a class="reference internal" href="cmd_running_apps.html#running-pydidas-applications"><span class="std std-ref">Running pydidas applications</span></a>.</p>
<p>As a recap, to run the app serially, use the <a class="reference internal" href="../../code/api/apps/execute_workflow_app.html#pydidas.apps.ExecuteWorkflowApp.run" title="pydidas.apps.ExecuteWorkflowApp.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a> method:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pydidas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">ExecuteWorkflowApp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>To run it utilizing parallelization, set up an
<a class="reference internal" href="../../code/api/multiprocessing.html#pydidas.multiprocessing.AppRunner" title="pydidas.multiprocessing.AppRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AppRunner</span></code></a> and use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">start</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">ExecuteWorkflowApp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">runner</span> <span class="o">=</span> <span class="n">pydidas</span><span class="o">.</span><span class="n">multiprocessing</span><span class="o">.</span><span class="n">AppRunner</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">runner</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="go"># After running, get the updated app with the results back:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">get_app</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="accessing-results">
<h2>Accessing results<a class="headerlink" href="#accessing-results" title="Link to this heading">#</a></h2>
<section id="using-autosave">
<h3>Using autosave<a class="headerlink" href="#using-autosave" title="Link to this heading">#</a></h3>
<p>If autosave has been enabled, the results are written to files and can be
accessed externally by any program which can read the defined data type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please be advised that accessing the data while processing is still running
can corrupt the output files and make them illegible.</p>
</div>
</section>
<section id="accessing-results-within-python">
<h3>Accessing results within Python<a class="headerlink" href="#accessing-results-within-python" title="Link to this heading">#</a></h3>
<p>The results from the ExecuteWorkflowApp are written in the global
<code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowResults</span></code> (the
Singleton instance of <a class="reference internal" href="../../code/api/workflow/workflow.html#pydidas.workflow.WorkflowResults" title="pydidas.workflow.WorkflowResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkflowResults</span></code></a>) which is described in
detail in <a class="reference internal" href="../cmdline_global/cmd_workflow_results.html#workflow-results"><span class="std std-ref">The WorkflowResults class</span></a>.</p>
</section>
</section>
<section id="list-of-all-executeworkflowapp-parameters">
<h2>List of all ExecuteWorkflowApp Parameters<a class="headerlink" href="#list-of-all-executeworkflowapp-parameters" title="Link to this heading">#</a></h2>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>live_processing (type: bool, default: False)</dt><dd><p>Set live processing to True if the files do not yet exist at process
startup. This will skip checks on file existence and size.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>autosave_results (type: bool, default: False)</dt><dd><p>Save the results automatically after finishing processing. The results
for each plugin will be saved in a separete file (or files if multiple
formats have been selected).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>autosave_dir (type: Union[str, Path], default: [empty])</dt><dd><p>The directory for autosave files.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>autosave_format (type: str, default: ‘HDF5’)</dt><dd><p>The file format(s) for the data to be saved after the workflow has been
excuted. All data will be saved in a single folder for each run with
one file for each plugin. Note that the Parameter choices are defined
in pydidas and the value can only correspond to any of these choices.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="cmd_composite_creator_app.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial for the CompositeCreatorApp</p>
      </div>
    </a>
    <a class="right-next"
       href="cmd_directory_spy_app.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tutorial for the DirectorySpyApp</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#globally-controlled-settings">Globally controlled settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-of-the-executeworkflowapp">Setup of the ExecuteWorkflowApp</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#live-processing">Live processing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automatic-saving">Automatic saving</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-executeworkflowapp">Running the ExecuteWorkflowApp</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-results">Accessing results</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-autosave">Using autosave</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-results-within-python">Accessing results within Python</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#list-of-all-executeworkflowapp-parameters">List of all ExecuteWorkflowApp Parameters</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/hereon-GEMS/pydidas/edit/master/pydidas/docs/src/manuals/cmdline_apps/cmd_execute_workflow_app.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/manuals/cmdline_apps/cmd_execute_workflow_app.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2021 - 2024, Helmholtz-Zentrum Hereon.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>